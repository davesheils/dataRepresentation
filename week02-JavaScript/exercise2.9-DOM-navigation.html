<!DOCTYPE html>
<html>
<head>

  <title>Exercise 2.9</title>

<script>

// function to read data from row

function doRow(buttonElement) 
{
  console.log("doRow works");
  var rowElement = buttonElement.parentNode.parentNode
  var data = {}
  data.cell0 = rowElement.cells[0].firstChild.textContent;
  data.cell1 = rowElement.cells[1].firstChild.textContent;

  console.log(JSON.stringify(data));
}

// function to add row to table

function addRow()
{
  var tableElement = document.getElementById("mainTable");
  var data = {cell1:"Hello", cell2:"World",cell3:'<button onClick="doRow(this)">output</button>'};

  var rowElement = tableElement.insertRow(-1);
  var cellElement = rowElement.insertCell(0);
  cellElement.innerHTML = data.cell1;
  cellElement = rowElement.insertCell(1);
  cellElement.innerHTML = data.cell2;
  cellElement = rowElement.insertCell(2);
  cellElement.innerHTML = data.cell3;
}

</script>

</head>

<body>




<table id ="mainTable">
  <tr>
      <td>David</td>
      <td>Helen</td>
      <td><button onClick="doRow(this)">output</button></td>
  </tr>
</table>
<button onClick="addRow()">Click to add row</button>
</body>

</html>